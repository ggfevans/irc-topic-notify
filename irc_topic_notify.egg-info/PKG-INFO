Metadata-Version: 2.4
Name: irc-topic-notify
Version: 1.0.0
Summary: Monitor IRC channel topics and get push notifications
Author: ggfevans
License-Expression: MIT
Project-URL: Homepage, https://github.com/ggfevans/irc-topic-notify
Project-URL: Repository, https://github.com/ggfevans/irc-topic-notify
Project-URL: Issues, https://github.com/ggfevans/irc-topic-notify/issues
Keywords: irc,notifications,pushover,monitoring
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Intended Audience :: Developers
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Communications :: Chat :: Internet Relay Chat
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: irc>=20.0.0
Requires-Dist: requests>=2.25.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Dynamic: license-file

# irc-topic-notify

A lightweight IRC bot that monitors channel topics for specific phrases and sends push notifications via [Pushover](https://pushover.net).

![Screenshot](screenshot.png)

## Use Cases

- **Game server status**: get notified when your server's IRC channel topic changes to "ONLINE" or "MAINTENANCE COMPLETE"
- **Incident response**: alert when a team channel topic changes to "INCIDENT IN PROGRESS"
- **Community events**: catch when a channel topic updates to "LIVE NOW" for streams or events

## Features

- **Simple trigger matching**: case-sensitive or case-insensitive phrase detection
- **Pushover notifications**: customizable title, message, and URL
- **Notification cooldown**: prevents spam from rapid topic changes
- **Auto-reconnect**: handles disconnections gracefully
- **Systemd ready**: includes service file for daemonized operation
- **Docker support**: run with docker compose or standalone container
- **Read-only**: bot never sends messages to the channel

## Requirements

- Python 3.8+
- Pushover account ($5 one-time, 30-day free trial)

## Quick Start

```bash
# Clone
git clone https://github.com/ggfevans/irc-topic-notify.git
cd irc-topic-notify

# Setup
python3 -m venv --upgrade-deps venv
source venv/bin/activate
pip install -r requirements.txt

# Configure
cp config.example.py config.py
# Edit config.py with your IRC server, channel, trigger phrase, and Pushover tokens

# Test Pushover connection
python irc_topic_notify.py --test

# Test trigger detection
python irc_topic_notify.py --test-trigger "Status: OPEN"
python irc_topic_notify.py --test-trigger "Status: CLOSED"

# Run
python irc_topic_notify.py
```

## Configuration

Edit `config.py` with your settings:

| Setting | Description |
|---------|-------------|
| `IRC_SERVER` | IRC server hostname |
| `IRC_PORT` | SSL port (usually 6697 or 7000) |
| `IRC_CHANNEL` | Channel to monitor (include `#`) |
| `IRC_NICKNAME` | Bot's nickname |
| `TRIGGER_PHRASE` | Phrase to watch for |
| `TRIGGER_CASE_SENSITIVE` | Case-sensitive matching (default: `True`) |
| `PUSHOVER_APP_TOKEN` | Your Pushover app token |
| `PUSHOVER_USER_KEY` | Your Pushover user key |
| `NOTIFICATION_COOLDOWN_MINUTES` | Minimum time between notifications |

## Server Deployment

```bash
# Install
apt update && apt install -y python3 python3-venv git
useradd -r -m -s /bin/bash ircmonitor
git clone https://github.com/ggfevans/irc-topic-notify.git /opt/irc-topic-notify
chown -R ircmonitor:ircmonitor /opt/irc-topic-notify

# Setup venv
sudo -u ircmonitor bash -c 'cd /opt/irc-topic-notify && python3 -m venv --upgrade-deps venv && venv/bin/pip install -r requirements.txt'

# Configure
sudo -u ircmonitor cp /opt/irc-topic-notify/config.example.py /opt/irc-topic-notify/config.py
sudo -u ircmonitor nano /opt/irc-topic-notify/config.py

# Test
sudo -u ircmonitor /opt/irc-topic-notify/venv/bin/python /opt/irc-topic-notify/irc_topic_notify.py --test

# Install and start service
cp /opt/irc-topic-notify/irc-topic-notify.service /etc/systemd/system/
systemctl daemon-reload
systemctl enable --now irc-topic-notify

# Monitor
journalctl -u irc-topic-notify -f
```

## Docker

```bash
# Configure first
cp config.example.py config.py
# Edit config.py with your settings

# With docker compose
docker compose up -d

# Or standalone
docker build -t irc-topic-notify .
docker run -d --restart unless-stopped -v $(pwd)/config.py:/app/config.py:ro irc-topic-notify
```

## Pushover Setup

1. Sign up at [pushover.net](https://pushover.net) (30-day free trial, then $5 one-time)
2. Create an application at [pushover.net/apps/build](https://pushover.net/apps/build) â†’ copy the **API Token**
3. Copy your **User Key** from the Pushover dashboard
4. Add both to `config.py`

### Test Pushover (without the bot)

```bash
curl -s \
  --form-string "token=YOUR_APP_TOKEN" \
  --form-string "user=YOUR_USER_KEY" \
  --form-string "message=Test notification" \
  https://api.pushover.net/1/messages.json
```

## Troubleshooting

| Issue | Solution |
|-------|----------|
| `Config error: PUSHOVER_APP_TOKEN not configured` | Edit `config.py` with your real tokens |
| `Nickname in use` | Change `IRC_NICKNAME` in `config.py` |
| Connection timeout | Check firewall allows outbound traffic on the IRC port |
| No topic shown | Channel may not have a topic set |

## Development

```bash
# Install with dev dependencies (assumes venv created with --upgrade-deps)
pip install -e ".[dev]"

# Run tests
pytest

# Run tests with coverage
pytest --cov=irc_topic_notify --cov-report=term-missing
```

## License

MIT License - see [LICENSE](LICENSE)

## Contributing

Issues and PRs welcome. See [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.
